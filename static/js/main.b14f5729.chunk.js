(this["webpackJsonpuser-authorization"]=this["webpackJsonpuser-authorization"]||[]).push([[0],{108:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(11),i=n.n(c),o=(n(97),n(71)),s=n.n(o),u=n(15),l=n(18),d="https://tager.dev.ozitag.com/";var j={status:"idle",error:null},h=function(e){return{type:"APP-REDUCER/SET-APP-STATUS",status:e}},m=function(e){return{type:"APP-REDUCER/SHOW-APP-ERROR",error:e}},f={userName:null,userEmail:null},O=function(){return function(e){var t=localStorage.getItem("access_token");if(t){var n=JSON.parse(t);e(p(n))}}},b={token:null,isLoggedIn:!1},p=function(e){return{type:"AUTH-REDUCER/SET-ACCESS-TOKEN",token:e}},g=function(e){return{type:"AUTH-REDUCER/SET-IS-LOGGED-IN",isLoggedIn:e}},x=function(e,t){return function(n){n(h("loading")),function(e,t){return fetch(d+"api/auth/user",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({clientId:1,email:e,password:t})}).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))})).then((function(e){return e.data})).catch((function(e){var t=JSON.parse(e.message);throw new Error(t.message)}))}(e,t).then((function(e){n(h("succeeded")),n(g(!0));var t,r=e.accessToken;n((t=r,function(e){t&&localStorage.setItem("access_token",JSON.stringify(t))})),n(v())})).catch((function(e){n(g(!1)),n(h("failed")),n(m(e.message))}))}},E=function(){return function(e){e(h("loading")),fetch("https://secret-ocean-49799.herokuapp.com/"+d+"user/profile/logout",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({})}).then((function(e){if(e.ok){var t=JSON.stringify(e);return JSON.parse(t)}return e.text().then((function(e){throw new Error(e)}))})).then((function(e){return e.data})).catch((function(e){return JSON.parse(e.message).message})).then((function(){e(h("succeeded")),e(g(!1)),e((function(e){localStorage.removeItem("access_token")}))})).catch((function(t){e(h("failed")),e(m(t.message))}))}},v=function(){return function(e,t){e(O());var n=t().auth.token;e(h("loading")),function(e){return fetch(d+"api/tager/user/profile",{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))})).then((function(e){return e.data})).catch((function(e){return JSON.parse(e.message).message}))}(n).then((function(t){e(h("succeeded")),e(g(!0));var n=t.name,r=t.email;e(function(e,t){return{type:"PROFILE-REDUCER/SET-USER-DATA",name:e,email:t}}(n,r))})).catch((function(t){e(h("failed")),e(g(!1)),e(m(t.message))}))}},R=n(148),S=n(149),w=n(110),N=n(150),y=n(145),T=n(162),P=Object(y.a)((function(e){return Object(T.a)({root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}})})),A=n(161),C=n(159),I=n(4),L=a.a.memo((function(){var e=Object(u.c)((function(e){return e.app.error})),t=Object(u.b)(),n=function(e,n){"clickaway"!==n&&t(m(null))},r=null!==e;return Object(I.jsx)(A.a,{open:r,autoHideDuration:4e3,onClose:n,children:Object(I.jsx)(k,{onClose:n,severity:"error",children:e})})}));function k(e){return Object(I.jsx)(C.a,Object(l.a)({elevation:6,variant:"filled"},e))}var D=a.a.memo((function(){var e=Object(u.c)((function(e){return e.auth.isLoggedIn})),t=Object(u.b)(),n=P();return Object(I.jsx)("div",{className:n.root,children:Object(I.jsxs)(R.a,{position:"static",children:[Object(I.jsx)(L,{}),Object(I.jsxs)(S.a,{children:[Object(I.jsx)(w.a,{variant:"h6",className:n.title,children:"User Authorization"}),Object(I.jsx)(N.a,{color:"inherit",onClick:function(){t(E())},children:e?"Sign out":""})]})]})})})),U=n(13),_=n(151),F=n(152),J=n(163),G=n(157),W=n(158),H=n(153),z=n(78),q=n.n(z),B=n(80),Z=Object(y.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),K=function(){var e=Z(),t=Object(u.b)(),n=Object(u.c)((function(e){return e.auth.isLoggedIn})),r=Object(B.a)({initialValues:{email:"user@ozitag.com",password:"user"},onSubmit:function(e){var n=e.email,a=e.password;t(x(n,a)),r.resetForm()},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",e.password?e.password.length<4&&(t.password="Must be 4 characters or more"):t.password="Required",t}});return n?Object(I.jsx)(U.a,{to:ae.PROFILE}):Object(I.jsxs)(_.a,{component:"main",maxWidth:"xs",children:[Object(I.jsx)(F.a,{}),Object(I.jsxs)("div",{className:e.paper,children:[Object(I.jsx)(J.a,{className:e.avatar,children:Object(I.jsx)(q.a,{})}),Object(I.jsx)(w.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(I.jsxs)("form",{className:e.form,noValidate:!0,onSubmit:r.handleSubmit,children:[Object(I.jsx)(G.a,Object(l.a)({variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",autoComplete:"off",autoFocus:!0},r.getFieldProps("email"))),r.touched.email&&r.errors.email?Object(I.jsx)("div",{style:{color:"red"},children:r.errors.email}):"",Object(I.jsx)(G.a,Object(l.a)({variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Password",type:"password",id:"password",autoComplete:"off"},r.getFieldProps("password"))),r.touched.password&&r.errors.password?Object(I.jsx)("div",{style:{color:"red"},children:r.errors.password}):"",Object(I.jsx)(N.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,children:"Sign In"})]})]}),Object(I.jsx)(W.a,{mt:8,children:Object(I.jsx)(M,{})})]})};function M(){return Object(I.jsxs)(w.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(I.jsx)(H.a,{color:"inherit",href:"https://github.com/andrew9488",children:"Website"})," ",(new Date).getFullYear(),"."]})}var V=n(154),Y=n(155),$=Object(y.a)((function(e){return Object(T.a)({root:{minWidth:260,maxWidth:340,width:"100%",margin:"20px auto",display:"flex",flexDirection:"column",alignItems:"center",background:"#8080801f","&:hover":{boxShadow:"4px 4px 12px rgba(0, 0, 0, 0.4)"}},title:{margin:"10px 3px 5px 3px",fontSize:24,fontWeight:700},media:{height:306,width:"90%",marginTop:10}})})),Q=n.p+"static/media/image.60803bf7.png",X=a.a.memo((function(){var e=Object(u.c)((function(e){return e.profile.userName})),t=Object(u.c)((function(e){return e.profile.userEmail})),n=Object(u.c)((function(e){return e.auth.isLoggedIn})),r=$();return n?Object(I.jsxs)(V.a,{className:r.root,children:[Object(I.jsx)(Y.a,{className:r.media,image:Q}),Object(I.jsxs)(w.a,{variant:"h5",component:"h1",className:r.title,children:["Name: ",e]}),Object(I.jsxs)(w.a,{variant:"h5",component:"h1",className:r.title,children:["Email: ",t]})]}):Object(I.jsx)(U.a,{to:ae.LOGIN})})),ee=n(34),te=n(59),ne=n.n(te),re=a.a.memo((function(){return Object(I.jsxs)("div",{className:ne.a.error,children:[Object(I.jsx)("div",{children:"ERROR 404"}),Object(I.jsx)("div",{children:"The cat couldn't find a page!"}),Object(I.jsx)("div",{className:ne.a.errorCat,children:"\u2014\u0e05/\u1420.\u032b .\u141f\\\u0e05\u2014"}),Object(I.jsx)("nav",{children:Object(I.jsx)("div",{className:ne.a.item,children:Object(I.jsx)(ee.b,{to:ae.PROFILE,children:"go home"})})})]})})),ae={LOGIN:"/",PROFILE:"/profile",ERROR:"/404"},ce=a.a.memo((function(){return Object(I.jsxs)(U.d,{children:[Object(I.jsx)(U.b,{exact:!0,path:ae.LOGIN,render:function(){return Object(I.jsx)(K,{})}}),Object(I.jsx)(U.b,{path:ae.PROFILE,render:function(){return Object(I.jsx)(X,{})}}),Object(I.jsx)(U.b,{path:ae.ERROR,render:function(){return Object(I.jsx)(re,{})}}),Object(I.jsx)(U.a,{from:"*",to:ae.ERROR})]})})),ie=n(156),oe=Object(y.a)((function(e){return Object(T.a)({root:{display:"flex","& > * + *":{marginLeft:e.spacing(5)},justifyContent:"center",marginTop:50}})})),se=a.a.memo((function(){var e=oe();return Object(I.jsx)("div",{className:e.root,children:Object(I.jsx)(ie.a,{style:{width:"100px",height:"100px"}})})})),ue=a.a.memo((function(){var e=Object(u.c)((function(e){return e.app.status})),t=Object(u.c)((function(e){return e.auth.token})),n=Object(u.b)();return Object(r.useEffect)((function(){n(O()),t&&n(v())}),[t]),Object(I.jsxs)("div",{className:s.a.app,children:[Object(I.jsx)(D,{}),"loading"===e?Object(I.jsx)(se,{}):Object(I.jsx)(ce,{})]})})),le=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,165)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))},de=n(60),je=n(79),he=Object(de.b)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APP-REDUCER/SET-APP-STATUS":return Object(l.a)(Object(l.a)({},e),{},{status:t.status});case"APP-REDUCER/SHOW-APP-ERROR":return Object(l.a)(Object(l.a)({},e),{},{error:t.error});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH-REDUCER/SET-ACCESS-TOKEN":return Object(l.a)(Object(l.a)({},e),{},{token:t.token});case"AUTH-REDUCER/SET-IS-LOGGED-IN":return Object(l.a)(Object(l.a)({},e),{},{isLoggedIn:t.isLoggedIn});default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PROFILE-REDUCER/SET-USER-DATA":return Object(l.a)(Object(l.a)({},e),{},{userName:t.name,userEmail:t.email});default:return e}}}),me=Object(de.c)(he,Object(de.a)(je.a));i.a.render(Object(I.jsx)(a.a.StrictMode,{children:Object(I.jsx)(ee.a,{children:Object(I.jsx)(u.a,{store:me,children:Object(I.jsx)(ue,{})})})}),document.getElementById("root")),le()},59:function(e,t,n){e.exports={error:"Error404_error__2PP7y",errorCat:"Error404_errorCat__150L-",item:"Error404_item__2g6PZ"}},71:function(e,t,n){e.exports={app:"App_app__LTH40"}},97:function(e,t,n){}},[[108,1,2]]]);
//# sourceMappingURL=main.b14f5729.chunk.js.map